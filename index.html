<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SpinChoice.io</title>
<style>
body { font-family:"Segoe UI",sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; margin:0; background:linear-gradient(135deg,#74ebd5,#9face6); }
#container { position:relative; width:90vmin; max-width:500px; }
canvas { width:100%; height:100%; border-radius:50%; display:block; }
#pointer { 
  width:0; height:0; 
  border-left:25px solid transparent; 
  border-right:25px solid transparent; 
  border-top:50px solid #e63946; /* points DOWN */
  position:absolute; 
  top:-50px; left:50%; 
  transform:translateX(-50%); 
  z-index:10;
}
button { margin-top:20px; padding:12px 20px; font-size:16px; font-weight:700; color:white; background:#457b9d; border:none; border-radius:8px; cursor:pointer; }
button:hover { background:#1d3557; }
#winner { margin-top:15px; font-size:20px; font-weight:700; color:#222; }
</style>
</head>
<body>
<div id="container">
  <div id="pointer"></div>
  <canvas id="wheel" width="600" height="600"></canvas>
</div>
<button id="spinBtn">Spin!</button>
<p id="winner"></p>

<script>
const sequence = ["Devin","Tommy","Dom","Jimmy","Alex","Tim C","Noah S","Lorcan","Hisham","Tim R","Noah R","Nick"];
let remaining = [...sequence];
let spinStep = 0; 
let isSpinning = false;

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const spinBtn = document.getElementById("spinBtn");
const winnerEl = document.getElementById("winner");

function drawWheel() {
  const size = canvas.width;
  const radius = size/2;
  const slices = remaining.length;
  const sliceAngle = 2*Math.PI/slices;
  ctx.clearRect(0,0,size,size);
  for (let i=0;i<slices;i++) {
    ctx.beginPath();
    ctx.moveTo(radius,radius);
    ctx.arc(radius,radius,radius,i*sliceAngle,(i+1)*sliceAngle);
    ctx.fillStyle = `hsl(${i*360/slices},70%,65%)`;
    ctx.fill();
    ctx.strokeStyle = "#333";
    ctx.stroke();

    ctx.save();
    ctx.translate(radius,radius);
    ctx.rotate(i*sliceAngle + sliceAngle/2);
    ctx.textAlign="right";
    ctx.fillStyle="#111";
    ctx.font="20px Arial";
    ctx.fillText(remaining[i], radius-10, 0);
    ctx.restore();
  }
}

drawWheel();

function spinWheel() {
  if (isSpinning || remaining.length===0) return;
  isSpinning = true;

  const slices = remaining.length;
  const sliceAngle = 360/slices;

  const winnerName = sequence[spinStep];
  const winnerIndex = remaining.indexOf(winnerName);

  // target rotation so winner slice is at 270Â° (top, under pointer)
  const stopAngle = 360*5 + (270 - (winnerIndex*sliceAngle + sliceAngle/2));

  let start=null;
  const duration = 4500;
  function animate(timestamp){
    if(!start) start=timestamp;
    const progress = Math.min((timestamp-start)/duration,1);
    const eased = 1-Math.pow(1-progress,3);
    const angle = stopAngle*eased;
    canvas.style.transform = `rotate(${angle}deg)`;

    if(progress<1){
      requestAnimationFrame(animate);
    } else {
      // remove winner after spin
      remaining.splice(winnerIndex,1);
      winnerEl.textContent = winnerName + " was picked!";
      spinStep++;
      drawWheel();
      isSpinning=false;
      if(remaining.length===0) spinBtn.disabled=true;
    }
  }
  requestAnimationFrame(animate);
}

spinBtn.addEventListener("click",spinWheel);
</script>
</body>
</html>
